#Python函数定义和使用

标签（空格分隔）： Python 函数

---
2018 06 29
##如何定义函数：
简单的规则：

 - 函数代码块以def关键字开头，后接函数标识符名称和圆括号()
 - 任何传入参数和自变量必须放在括号中间。圆括号之间可以用于定义参数
 - 函数第一样语句可以选择性地使用文档字符串用于存放函数说明
 - 函数表达式以冒号起始

语法结构：
```
def function(arg1,arg2):
    return 'something'
```
def -> define
arg -> argument 


python 不做类型检查 不支持重载，不区分参数名字和个数，多个同名函数时，后一个会覆盖前一个位置参数和关键字参数

传入可变值 -> 引用传入 会改变源
传入不可变值 -> 值传入 不会改变

函数的四种参数：

 - 必备参数：调用函数时必须传入 
 - 关键字参数： 
 - 缺省参数： 
 - 不定长参数  *args  **kwargs

数据都以元组的形式存放；以关键字参数形式传入，以字典形式存储

**如果你传入的参数对象是可变对象：列表，字典，这个时候就是引用传递，如果参数在函数体内被修改，那么源对象也会被修改。
如果你传入的参数对象是不可变的对象：数字，元组，字符串，这个时候就是值传递。那么源对象是不会改变的**，
**对于一段内容的截取，要善用切片功能。**


#作业
把之前做过的题目做成函数

```
#封装冒泡排序函数
def bubble (*args):
    for i in range(1,len(args)-1):
        for j in range(1,len(args)-1-i):
            if args[j] > args[j+1]:
                args[j],args[j+1] = args[j+1],args[j]
    return args

print(bubble(6,9,15,66,88,99))

#定义一个函数，传入列表并判断其长度，如果大于2，那么仅保留前两个长度的内容，并将新内容返回给调用者
def twoItems (*args):
    if len(args) > 2:
        return [args[0],args[1]]
    else:
        return [args]
print(twoItems(1,2,1))

def twoItems2 (*args):
    return args[:2]

print(twoItems2(1,2,1))

#定义函数，传入列表或元组对象，并判断所有奇数位索引对应的元素，并将其作为新的列表返回给调用者
def oddItems (*args):
    newList = []
    for i in range(0,len(args)):
        if i % 2 == 1:
            newList.append(args[i])
    return newList
print(oddItems(1,2,3,4,5,6,7))

def oddItems2 (*args):
    return args[::2]
print(oddItems(1,2,3,4,5,6,7))
print()

#定义函数，传入字典判断每一个value的长度，如果大于2，那么仅仅保留前两个长度的内容，并将新内容返回给调用者

#最笨的办法
def twoDicts (**kwargs):
    for key in kwargs.keys():
        if len(kwargs[key]) > 2:
            if type(kwargs[key]) == str:
                kwargs[key] = kwargs[key][0] + kwargs[key][1]
            elif type(kwargs[key]) == list:
                kwargs[key] = [kwargs[key][0], kwargs[key][1]]
            elif type(kwargs[key]) == tuple:
                kwargs[key] = (kwargs[key][0], kwargs[key][1])
    return kwargs
print(twoDicts(k1 = "python",k2 = [1,2,3],k3 = (1,2,3)))

def twoDict3(**kwargs):
    for key, value in kwargs.items():
        if len(value) > 2:
            kwargs[key] = value[0:2]
    return kwargs
print(twoDict3(k1 = "python",k2 = [1,2,3],k3 = (1,2,3)))

def twoDicts2(**kwargs):
    for key in kwargs:
        kwargs[key] = kwargs[key][:2]
    return kwargs
print(twoDicts2(k1 = "python",k2 = [1,2,3]))


def thowDict(**kwargs):
    print(kwargs)

thowDict(k1 = "python",k2 = [1,2,3],k3 = {1:'a',2:'b',3:'c'})
```

##匿名函数
可读性尚可，简洁性好。
```
# Anonymous functions

#没参数
a = lambda : 'rongda'
print(a())

#有参数
b = lambda x: x * x
print(b(2))

#列表推导式
c = lambda x: [i for i in x if i%2 == 0]
print(c([1,2,3,4,5,5]))

#多个参数
sum_1 = lambda arg1, arg2: arg1 + arg2
print(sum_1(10,22))


def funcA(x):
    return lambda y: x + y
sum2 = funcA(2)  # sum2 = lambda y: 2 + y
result = sum2(22)
print(result)
```

##函数闭包
概念： 在一个外函数中定义了一个内函数，
内函数用了外函数的临时变量
外函数的返回值是内函数的引用
##装饰器

本质上是一个Python函数，功能就是在不改变原来代码的情况下增加额外的功能
插入日志，性能测试，事务处理，**缓存，权限校验**

@+ 函数名 就是装饰器

最大的功能就是可以抽离出大量的与函数功能本身无关的雷同代码并继续重用。
就是为已经存在的对象添加额外的功能。    


Python中一切皆对象

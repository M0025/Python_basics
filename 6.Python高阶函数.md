# Python高阶函数

标签（空格分隔）： 函数 Python 
---
2018 07 02
##lambda表达式
规则：
lambda 参数列表：表达式
本质是一个表达式。函数的返回值就是表达式的返回值。
创建的是匿名函数规则
有自己的命名空间，不能访问自有参数列表以外的参数，包括全局参数
不需要return语句
## 利用lambda表达式实现
### filter()函数
用于过滤序列， 过滤掉不符合条件的元素。返回由符合条件元素组成的新列表。
filter(function, iterable)
function -- 判断函数
iterable -- 可迭代对象
```
def my_filter(n):
    return n % 2 == 1
list1 = [1, 2, 3, 4, 5, 6]
list2 = filter(my_filter, list1)
print(list(list2)

print(list(filter(lambda x:x%2 == 0,list1)))
```



###map()函数
map函数会根据提供的函数对指定序列做批量处理
map函数的定义：
map(function，seq） -> list
返回一个迭代器
<map object at 0x000002D2C55D8550>
类似于生成器，生成器本身就是一种特殊的迭代器。
```
def add(x, y):
    return x + y
#对应相加 返回一个生成器
list3 = map(add, [1, 3, 5, 7, 9],[2, 4, 6, 8])
print(list3)
list4 = map(lambda x, y:x + y, [1, 3, 5, 7, 9],[2, 4, 6, 8])
print(next(list4))
```

###reduce函数
reduce函数会对参数序列中元素进行总体计算
定义：
reduce(function, seq[,arg])->value
function参数是一个有两个参数的函数，reduce依次从seq中取一个元素，和上一次调用function的结果做参数再次调用function。（就是一种递归被）
第一次调用function时，如果提供arg参数，会以seq中的第一个元素和arg作为参数调用function，否则会以序列seq中的前两个元素做参数调用function。
function -- 函数 有两个参数
seq -- 可迭代对象
arg -- 可选 初始参数

函数对象：函数是对象，可以给函数增加属性
###函数闭包
1.概念：

 - 在外函数中定义一了一个内函数
 - 内函数里运用了外函数的变量
 - 外函数的返回值是内函数的引用
2.作用：
保存函数状态信息，使函数的局部变量信息依然可以保存下来。
```
#闭包
def outer(a):
    b = 10
    def inner():
        print(a + b) #内函数用了外函数的临时变量
    return inner     #外函数的返回值是内函数的引用
demo = outer(5)
demo()
```
###装饰器
一、什么是装饰器，为什么需要装饰器及其一般场景。
装饰器本质上是一个Python函数，它可以让函数在不改变代码的情况下添加新的功能，装饰器的本质是个闭包，返回值也是一个函数对象。对于有确切需求的场景：插入日志、性能测试、事务处理、**缓存、权限校验**。 使得我们可以抽出大量与函数功能本身无关的雷同代码并继续**重用**。为已经存在的对象添加额外功能。

装饰器的使用：
```
def outer2(func):
    def inner(*args, **kw):
        print("i'am %s()function"%func.__name__)  #__name__属性可以获得函数名字
        return func(*args, **kw)
    return inner

@outer2  #@语法，调用闭包语法
def hello():  #被装饰函数
    print('我是最初的hello函数')
hello()
```

多个装饰器放，都放在函数上面，函数就被装饰了。
